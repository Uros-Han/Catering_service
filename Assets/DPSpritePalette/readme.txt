-------------------------------------------------------------------------------------------------------
DPSpritePalette
v1.4.4
-------------------------------------------------------------------------------------------------------

Created by Davi Santos (davisan2@gmail.com)
Website: https://davisan.wordpress.com/unity-assets/
Support: http://bit.ly/DaviSantosAssetsSupport


-----
About
-----

DPSpritePalette is a set of scripts that allows palette swapping of pixel art style sprites in run-time!
- Very simple to setup!
- For Unity's SpriteRenderer and UI.Image!
- Works with Spritesheets or individual sprites!
- No need to create a new material for each sprite.
- It two or more sprites has the same palette texture, the sprites will be dynamically batched!
- Palette builder! Just bring your palettes files (.act) from photoshop or (.png) from Pyxel Edit!
- Bilinear filtering!
- Palette Combiner: combine two Palette Textures in one at run-time.


---------
Changelog
---------

v1.4.4
- Minor fixes

v1.4.3 
- Minor fixes

v1.4.2
- Fixed some bugs of the bilinear shader

v1.4.1
- Added PaletteMultiCombiner: combine any number of Palette Textures in one at run-time.

v1.4
- Updated shader for Unity 5.5
- Import of Pyxel Edit PNG palette files.
- Bilinear filter via a new shader
- Palette Combiner: combine two Palette Textures in one at run-time.

v1.3
- Added a new shader for UI Image component.

v1.2.1:
- Updated the Palette Builder script to be compatible with older versions of Unity.

v1.2:
- Added a surface shader version. So you can use the Unity default lighting! To use it just assign the Material "SpritePaletteLightingMaterial" to the "Palette Material" field of the DPSpritePalette component.

v1.1.1:
- Fixed an exception in the PaletteBuilder


----------
How to Use
----------
	See the tutorial at https://youtu.be/q4kyAjQdqGM

1) Add the componenet DPSpritePalette to Game Object with the SpriteRenderer component. All the sprites used must have the following configuration:
		Disable "Generate Mip Maps"
		Filter Mode set to "Point"
		Format set to "True Color"
2) Assign the paletteTexture field with the palette texture, generated by the PaletteBuilder window.
3) You can chage the current palette index or the palette texture in run-time with the methods:
		SetPaletteIndex(int paletteIndex)
        SetPalette(Texture2D newNexture)

   See the file "Example/TestPalette.cs"


Optional:
4) If you want change the colors in palette texture in run-time, I recomend to pass to the paletteTexture field a copy, then change the colors of the copy.

   See the file "Example/TestPalette2.cs"
   
-----------------------------
Palette Builder for Act files
-----------------------------

	Palette Builder is a tool to import the palettes in .act format created in Photoshop to create the Palette Texture.
	See the tutorial at https://youtu.be/q4kyAjQdqGM

----------------------------------------
Palette Builder for Pyxel Edit PNG files
----------------------------------------

	A new Palette Builder was created for PNG files exported from Pyxel Edit (http://pyxeledit.com/).
	In Pyxel Edit when you are ready to export the Base Palette, export it with the menu 'Color' -> 'Export palette to image...'.
	Now for each palette, modify the colors by right clicking each color and choose 'Replace color...' on the Palette Window . After you are done, choose 'Color' -> 'Export palette to image...' and save it.
	Now on Unity just open 'Window' -> 'DP Sprite Palette' -> 'Palette Builder - PNG', assign the Base Palette and the others on each field. Then just save your Palette Texture to use on DPSpritePalette component.
	
	N.B: The transparent colors on the base palette will be ignored, but if put a transparent color on other palettes and the correspoding color on the base palette is not transparent, then this transparent color on the palette will used!
	Just see the file 'PaletteBuilder\ExamplePNG\Prisioner-Palette-02.png'.

-----------------------------
Scheme of the Palette Texture
-----------------------------

    Image size = Number of Paletes x Number of Colors
    The first column must have the same color of the sprite!!
    Each column represents a palette.

    Base Colors | Palette#1                | Palette#2                | ... | Palette#M
    ------------+--------------------------+--------------------------+-----+--------------------------
    Color#1     | Replacement for Color #1 | Replacement for Color #1 | ... | Replacement for Color #1
    Color#2     | Replacement for Color #2 | Replacement for Color #2 | ... | Replacement for Color #2
    Color#3     | Replacement for Color #3 | Replacement for Color #3 | ... | Replacement for Color #3 
    ...         | ...                      | ...                      | ... | ...
    Color#N     | Replacement for Color #N | Replacement for Color #N | ... | Replacement for Color #N
    

--------------------------------------------------------------------
Configuration of the Palette Texture Import Settings in Unity Editor
--------------------------------------------------------------------
	Texture Type          = Default
	Texture Shape         = 2D
	sRGB(Color Texture)   = CHECKED
	Alpha Source          = Input Texture Alpha
	Alpha is Transparency = CHECKED
	Non Power of 2        = NONE
	Read/Write Enabled    = any value 
	Generate Mipmaps      = UNCHECKED
	Wrap Mode             = CLAMP
    Filter Mode           = POINT (NO FILTER)
	Compression	          = NONE	


Older versions of Unity:
    Texture Type          = ADVANCED
    Non Power of 2        = NONE
    Import Type	          = DEFAULT
    Read/Write Enabled    = any value
    Alpha from Greyscale  = unchecked
    Alpha is Transparency = CHECKED
    Bypass sRGB Sampling  = unchecked
    Encode as RGBM        = auto
    Sprite Mode           = none
    Generate Mipmaps      = UNCHECKED
    Wrap Mode             = CLAMP
    Filter Mode           = POINT
    Format                = 'Automatic True Color' or 'RGBA 32 bit'
    
 
------------------------------------------------------------
Configuration of the Sprites Import Settings in Unity Editor
------------------------------------------------------------
	Texture Type          = Sprite (2D and UI)
	Sprite Mode           = Any mode!
	sRGB(Color Texture)   = CHECKED
	Alpha Source          = Input Texture Alpha
	Alpha is Transparency = CHECKED
	Read/Write Enabled    = any value 
	Generate Mipmaps      = UNCHECKED
	Wrap Mode             = CLAMP
    Filter Mode           = POINT	(if you want the bilinear filter, leave this as POINT and use the Bilinear version of the materials)
	Compression	          = NONE	(if this option is greyed for you, click on 'Default' tab. Alternatively you can check the override and choose the format to 'RGBA 32 bit')

Older versions of Unity:
	Texture Type     = Sprite
	Sprite Mode      = Any mode!
	Generate Mipmaps = UNCHECKED
	Filter Mode      = POINT
	Format           = True Color


----------------------------------------------------
Changing the maximum number os colors in the palette
----------------------------------------------------

By default, the color limit is hardcoded to 32 colors per palette.
You can increase/decrease this value by changing two values:
	1) In "DPSpritePalette.cs", change the variable "MAX_PALETTE_COLORS" (line 17)
	2) In "Shader/DPSpritePalette.cginc", change the variable "maxColors" (lines 19 and 49)
	3) In "Shader/DPSpritePalette.cginc", change the number in "[unroll(32)]" (lines 29 and 60)


----------
Questions?
----------
Contact Us: davisan2@gmail.com